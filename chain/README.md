# stable-coin

## Setup

Older versions of `pnpm` required manual installations per package,
but with the Nix setup this won't be necessary:

```bash
cd ../chain-dsl/ && pnpm install && cd ../chain/ && pnpm install
```

## Test

Run the test suite continuously to follow both test source code and
smart contract code changes:

```bash
pnpm test --watch
```

In JetBrains IDEs, like IntelliJ or WebStorm, you should set the `node`
executable path to what `which node` outputs in your `nix-shell`.

This setting is under `Preferences` / `Languages & Frameworks`
/ `Node.js and NPM` / `Node interpreter` input field.

To run mocha tests, you also need to specify the module path to mocha:

```
$ dirname $(dirname $(which mocha))
/nix/store/5l0xmpsk66l8dkrzi0cmkbpszsarapfc-node-mocha-5.2.0
```

and supply the path under `Run` / `Edit congfigurations...` / `Defaults`
/ `Mocha` / `Mocha package` input field.

## Development

To check your contract style:
```
stable-coin/chain$ pnpx solium --dir contracts
```

Or more strict style check:
```
stable-coin/chain$ pnpx solhint contracts/*.sol
```

## Notes

`dappsys.sol` was generated by combining the modules
from the monolithic dappsys distribution
into one file for easier navigation/exploration:

```bash
cd contracts/ds/

rm dappsys.sol ; \
 cat math.sol erc20.sol auth.sol note.sol stop.sol guard.sol roles.sol base.sol token.sol multivault.sol vault.sol exec.sol thing.sol | \
 gawk '/import/ {next} /\/\/.*\.sol/ {print; next} /\/\// {next} 1' > ../dappsys.sol 
```
<br />

Enjoy. (c) OpenANX and Blockchain Factory Ltd 2017. The GNU General Public License Version 3.
